<%- include('../partials/header'); %>
  <form>
    <h3>Search all posts in this category</h3>
    <span>
      <label for="searchText">Please enter your search text here:</label>
      <input type="text" name="searchText">
      <button>Search</button>
    </span>
  </form>
  <% if (data.results.length === 0) { %>
    <% if (path.includes('author-posts')) { %>
      <h3>Sorry, there either are no posts matching your search criteria or this user hasn't posted any guitar tips yet.</h3>
    <% } else { %>
      <h3>Sorry, there seem to currently be no posts matching your search criteria.</h3>
    <% } %>
  <% } else { %>
    <span>
      <h3>Sort by: </h3> 
      Title <button id="title-asc">Asc</button> <button id="title-desc">Desc</button>
      Rating <button id="rating-asc">Asc</button> <button id="rating-desc">Desc</button>
      Last updated <button id="updated-asc">Asc</button> <button id="updated-desc">Desc</button>
    </span>
    <ul>
      <% for (post of data.results) { %>
        <li>
          <a href="/posts/<%= post._id %>/<%= post.slug %>"><%= post.title %></a>
          <br>
          <span>Author: <%= post.author.username %></span>
        </li>
      <% } %>
    </ul>
    <%- include('../partials/pagination'); %>
  <% } %>
  <br>
  <% if (path.includes('author-posts') && currentUser && currentUser.role === 'admin') { %>
    <a href="/users/<%= data.results[0].author._id %>/<%= data.results[0].author.slug %>">View posts' author page</a>
  <% } %>
  <a href="/guitar-tips">To the guitar tips overview</a>

  <script type="module" src="/js/postScripts/getPosts.js"></script>
<%- include('../partials/footer'); %>